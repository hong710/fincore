Core Accounting Model

 Use single-entry accounting

 Use one signed amount column

 Positive = income

 Negative = expense

 Do not store balances (derive from transactions)

 Categories define Profit & Loss

 Tags are optional analytics only (Mâ€“M with transactions)

ğŸ¦ Accounts

 Create accounts (bank / debit / credit / cash)

 Support opening balance as opening transaction

 Opening must be positive only

 Opening excluded from P&L

 Archive accounts (is_active = false)

 Prevent hard delete if transactions exist

 Prevent new transactions on inactive accounts

ğŸ’³ Transactions (Manual)

 Create manual transaction

 Edit manual transaction (only if unlocked)

 Delete manual transaction (only if unlocked & unreconciled)

 Require category for income/expense

 Support optional payee field

 Support optional tags

ğŸ” Transfers

 Create transfers using two transactions

 Enforce exactly 2 rows per transfer

 Enforce zero-sum

 Use transfer_group_id

 Prevent editing/deleting one side

 Lock transfers as a pair

 Reverse transfers as a new paired transfer

â¬†ï¸ CSV Import (Unified Credit + Debit)

 Upload CSV via modal

 Dynamic column mapping

 Require Date

 Require Description

 Require Amount

 Ignore all other columns

 Preview first 10 rows

 Select target account

 Stage rows in ImportRow

 Validate all rows before commit

 Atomic import into Transaction

 Set is_imported = true

 Assign import_batch_id

 Disable editing amount & description for imported tx

 Allow tagging & categorization for imported tx

 Rollback import by batch only

 Disable rollback after reconciliation

ğŸ”’ Reconciliation & Locking (QuickBooks-style)

 Enter statement date

 Enter statement balance

 Calculate system balance up to date

 Show difference

 Allow fixes while unmatched

 Lock transactions once matched

 Lock all transactions â‰¤ statement date

 Lock transfers as pairs

 Prevent edit/delete after lock

ğŸ” Reversal System

 Reverse locked manual transactions

 Reverse imported transactions

 Reverse transfers as paired entries

 Link reversal to original transaction

 Prevent deletion of locked transactions

ğŸ“Š Profit & Loss

 Include income & expense only

 Exclude transfers & opening

 Group by category

 Ignore tags by default

 Allow exclude-tags filter (optional)

 Default P&L shows everything

ğŸ§© UI / UX

 Base layout (header / sidebar / footer)

 Sidebar collapsible

 Transactions table as primary screen

 Single Amount column (no spent/received)

 Color-code amounts (+ green / âˆ’ red)

 Lock indicator ğŸ”’

 Fix Actions dropdown (one open at a time)

 Add Transaction modal

 CSV Import modal (step-based)

 Reconciliation screen

 Reverse confirmation modal

ğŸ›¡ Safety & Rules

 Prevent cascade deletes

 Prevent deleting reconciled data

 Prevent editing locked data

 Preserve full audit history

 Corrections via reversal only

 SQLite-safe transactions

ğŸ“š Documentation (Required)

 Accounting rules

 Import rules

 Reconciliation rules

 Locking behavior

 Reversal explanation

 Tag vs category explanation

ğŸš€ Production Readiness

 Storybook (HTML mode)

 Tailwind + Preline consistency

 HTMX partials optimized

 Docker setup

 Backup strategy

 Seed demo data