{% load static vite %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% block title %}Fincore{% endblock %}</title>
  {% vite_asset 'src/main.js' 'css' as css_path %}
  {% if css_path %}
    <link rel="stylesheet" href="{{ css_path }}">
  {% else %}
    <link rel="stylesheet" href="{% static 'app/main.css' %}">
  {% endif %}
  {% block head_extra %}{% endblock %}
</head>
<body class="bg-slate-50 text-slate-900">
  <section class="flex h-screen min-h-screen flex-col overflow-hidden bg-slate-50" x-data="{ sidebarOpen: true, docsOpen: false, salesOpen: false, expenseOpen: false, reportOpen: false }">
    <!-- Header -->
    <header class="sticky top-0 z-40 flex h-14 items-center justify-between border-b border-slate-200 bg-indigo-600 px-4 shadow-sm text-white">
      <div class="flex items-center gap-3">
        <a href="/" class="flex items-center gap-2">
          <div class="flex h-9 w-9 items-center justify-center rounded-full bg-white text-xs font-semibold text-indigo-600 shadow-sm">FC</div>
          <span class="text-sm font-semibold text-white">FINCORE</span>
        </a>
      </div>
      <div class="flex items-center gap-3">
        <button type="button" class="inline-flex h-10 items-center gap-1 rounded-md border border-white/30 bg-white/10 px-3 text-xs font-medium text-white shadow-sm hover:bg-white/20" @click="docsOpen = !docsOpen">
          <svg class="h-4 w-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 6v6m0 4h.01M5.25 4.5h13.5a.75.75 0 0 1 .75.75v13.5a.75.75 0 0 1-.75.75H5.25a.75.75 0 0 1-.75-.75V5.25a.75.75 0 0 1 .75-.75Z"/></svg>
          Help
        </button>
        <div class="hs-dropdown relative inline-flex [--placement:bottom-right]">
          <button id="user-menu" type="button" class="hs-dropdown-toggle inline-flex h-10 items-center gap-2 rounded-md border border-white/30 bg-white/10 px-3 text-xs font-medium text-white shadow-sm hover:bg-white/20">
            <span class="h-8 w-8 rounded-full bg-white/30"></span>
            <span>J. Admin</span>
            <svg class="h-4 w-4 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m6 9 6 6 6-6"/></svg>
          </button>
          <div class="hs-dropdown-menu hidden min-w-[160px] divide-y divide-slate-100 rounded-md border border-slate-200 bg-white p-1 shadow-md" aria-labelledby="user-menu">
            <a class="block rounded-md px-3 py-2 text-sm text-slate-700 hover:bg-slate-50" href="#">Account</a>
            <a class="block rounded-md px-3 py-2 text-sm text-slate-700 hover:bg-slate-50" href="#">Logout</a>
          </div>
        </div>
      </div>
    </header>

    <div class="flex flex-1 overflow-hidden min-h-0">
      <!-- Sidebar -->
      <aside class="relative flex h-full min-h-0 flex-col border-r border-slate-200 bg-white transition-all duration-200" :class="sidebarOpen ? 'w-60' : 'w-16'">
        <div class="flex items-center justify-between border-b border-slate-200 px-3 py-3">
          <span class="text-xs font-medium text-slate-700" x-show="sidebarOpen">Navigation</span>
          <button type="button" class="inline-flex items-center rounded-md border border-slate-200 bg-white px-2 py-1 text-xs text-slate-700 shadow-sm hover:bg-slate-50" @click="sidebarOpen = !sidebarOpen">
            <svg class="h-4 w-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m15.75 19.5-7.5-7.5 7.5-7.5"/></svg>
          </button>
        </div>
        {% with current=request.resolver_match.url_name|default:'' %}
        <nav class="flex-1 space-y-1 overflow-y-auto p-3 text-sm">
          <a href="#" class="flex items-center gap-2 rounded-md px-3 py-2 text-slate-700 hover:bg-slate-50">
            <svg class="h-4 w-4 text-slate-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3.75 6A2.25 2.25 0 0 1 6 3.75h12A2.25 2.25 0 0 1 20.25 6v12a2.25 2.25 0 0 1-2.25 2.25H6A2.25 2.25 0 0 1 3.75 18V6Z" />
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M7.5 15.75v-3M12 15.75v-6M16.5 15.75v-4.5" />
            </svg>
            <span x-show="sidebarOpen">Dashboard</span>
          </a>
          <a href="{% url 'fincore:transaction_list' %}" class="flex items-center gap-2 rounded-md px-3 py-2 text-slate-700 hover:bg-slate-50 {% if current == 'transaction_list' %}bg-indigo-50 text-indigo-700 font-semibold{% endif %}">
            <svg class="h-4 w-4 {% if current == 'transaction_list' %}text-indigo-600{% else %}text-slate-500{% endif %}" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 9.75 12 3l9 6.75M4.5 10.5h15M6 21h12M6.75 10.5v10.5m3-10.5v10.5m3-10.5v10.5m3-10.5v10.5" />
            </svg>
            <span x-show="sidebarOpen">Transactions</span>
          </a>
          <a href="{% url 'fincore:account_list' %}" class="flex items-center gap-2 rounded-md px-3 py-2 text-slate-700 hover:bg-slate-50 {% if current == 'account_list' %}bg-indigo-50 text-indigo-700 font-semibold{% endif %}">
            <svg class="h-4 w-4 {% if current == 'account_list' %}text-indigo-600{% else %}text-slate-500{% endif %}" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3.75 6.75h16.5a.75.75 0 0 1 .75.75v9a.75.75 0 0 1-.75.75H3.75a.75.75 0 0 1-.75-.75v-9a.75.75 0 0 1 .75-.75Z" />
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M7.5 10.5a2.25 2.25 0 1 0 0 4.5h9a2.25 2.25 0 1 0 0-4.5h-9Z" />
            </svg>
            <span x-show="sidebarOpen">Accounts</span>
          </a>
          <div class="space-y-1">
            <button type="button" class="flex w-full items-center justify-between rounded-md px-3 py-2 text-slate-700 hover:bg-slate-50" @click="salesOpen = !salesOpen">
              <div class="flex items-center gap-2">
                <svg class="h-4 w-4 text-slate-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M21 7.5v9a2.25 2.25 0 0 1-2.25 2.25h-13.5A2.25 2.25 0 0 1 3 16.5v-9A2.25 2.25 0 0 1 5.25 5.25h13.5A2.25 2.25 0 0 1 21 7.5Z" />
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M18 9.75a2.25 2.25 0 0 0-2.25 2.25A2.25 2.25 0 0 0 18 14.25M6 9.75h.008v.008H6V9.75Zm0 4.5h.008v.008H6v-.008Zm12-.008h.008v.008H18v-.008Z" />
                </svg>
                <span x-show="sidebarOpen" class="font-medium">Sales &amp; Get Paid</span>
              </div>
              <svg class="h-3.5 w-3.5 text-slate-400 transition-transform" :class="salesOpen ? 'rotate-90' : ''" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m9 5 6 7-6 7"/></svg>
            </button>
            <div class="space-y-0.5 pl-6 text-xs text-slate-600" x-show="sidebarOpen && salesOpen">
              <a href="#" class="flex items-center gap-2 rounded-md px-3 py-2 hover:bg-slate-50">
                <svg class="h-4 w-4 text-slate-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12.75 2.25 6 3.75v16.5l6.75-1.5L18 21V4.5l-5.25-2.25Z" />
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 17.25v-4.5m3 4.5v-3m3 3v-1.5" />
                </svg>
                <span>Sale Transactions</span>
              </a>
            </div>
          </div>
          <a href="#" class="flex items-center gap-2 rounded-md px-3 py-2 text-slate-700 hover:bg-slate-50">
            <svg class="h-4 w-4 text-slate-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z" />
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4.5 20.25a7.5 7.5 0 0 1 15 0" />
            </svg>
            <span x-show="sidebarOpen">Vendors</span>
          </a>
          <a href="#" class="flex items-center gap-2 rounded-md px-3 py-2 text-slate-700 hover:bg-slate-50">
            <svg class="h-4 w-4 text-slate-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 2.25h-3a.75.75 0 0 0-.75.75v3l9.75 9.75a2.25 2.25 0 0 0 3.182 0l2.568-2.568a2.25 2.25 0 0 0 0-3.182L11.182 2.25H9Z" />
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M6.75 6.75h.008v.008H6.75V6.75Z" />
            </svg>
            <span x-show="sidebarOpen">Chart of Account</span>
          </a>
          <div class="space-y-1">
            <button type="button" class="flex w-full items-center justify-between rounded-md px-3 py-2 text-slate-700 hover:bg-slate-50" @click="expenseOpen = !expenseOpen">
              <div class="flex items-center gap-2">
                <svg class="h-4 w-4 text-slate-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3.75 5.25h16.5a.75.75 0 0 1 .75.75v12a.75.75 0 0 1-.75.75H3.75a.75.75 0 0 1-.75-.75v-12a.75.75 0 0 1 .75-.75Z" />
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 9h18" />
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M6 15h3" />
                </svg>
                <span x-show="sidebarOpen" class="font-medium">Expense &amp; Bills</span>
              </div>
              <svg class="h-3.5 w-3.5 text-slate-400 transition-transform" :class="expenseOpen ? 'rotate-90' : ''" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m9 5 6 7-6 7"/></svg>
            </button>
            <div class="space-y-0.5 pl-6 text-xs text-slate-600" x-show="sidebarOpen && expenseOpen">
              <a href="#" class="flex items-center gap-2 rounded-md px-3 py-2 hover:bg-slate-50">
                <svg class="h-4 w-4 text-slate-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M21 12.75v-3a2.25 2.25 0 0 0-2.25-2.25H5.25A2.25 2.25 0 0 0 3 9.75v6a2.25 2.25 0 0 0 2.25 2.25h13.5A1.5 1.5 0 0 0 21 16.5v-3Z" />
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M21 12.75H12a.75.75 0 0 0 0 1.5h9" />
                </svg>
                <span>Bills &amp; Receipts</span>
              </a>
              <a href="#" class="flex items-center gap-2 rounded-md px-3 py-2 hover:bg-slate-50">
                <svg class="h-4 w-4 text-slate-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9.75 9a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" />
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M14.25 12.75a3 3 0 1 0 0-6" />
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M2.25 18.75a6.375 6.375 0 0 1 12.75 0m0 0a4.875 4.875 0 0 1 9.75 0" />
                </svg>
                <span>Payroll</span>
              </a>
            </div>
          </div>
          <div class="space-y-1">
            <button type="button" class="flex w-full items-center justify-between rounded-md px-3 py-2 text-slate-700 hover:bg-slate-50" @click="reportOpen = !reportOpen">
              <div class="flex items-center gap-2">
                <svg class="h-4 w-4 text-slate-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M11.25 2.25a.75.75 0 0 1 .75.75v8.25h8.25a.75.75 0 0 1 .75.75 9 9 0 1 1-9.75-9.75Z" />
                </svg>
                <span x-show="sidebarOpen" class="font-medium">Report</span>
              </div>
              <svg class="h-3.5 w-3.5 text-slate-400 transition-transform" :class="reportOpen ? 'rotate-90' : ''" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m9 5 6 7-6 7"/></svg>
            </button>
            <div class="space-y-0.5 pl-6 text-xs text-slate-600" x-show="sidebarOpen && reportOpen">
              <a href="#" class="flex items-center gap-2 rounded-md px-3 py-2 hover:bg-slate-50">
                <svg class="h-4 w-4 text-slate-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4.5 5.25h15a.75.75 0 0 1 .75.75v12a1.5 1.5 0 0 1-3 0v-9.75H6v9.75a1.5 1.5 0 0 1-3 0v-12a.75.75 0 0 1 .75-.75Z" />
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 8.25h6m-6 3h6m-6 3h3" />
                </svg>
                <span>Cashflow</span>
              </a>
              <a href="#" class="flex items-center gap-2 rounded-md px-3 py-2 hover:bg-slate-50">
                <svg class="h-4 w-4 text-slate-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4.5 5.25h15a.75.75 0 0 1 .75.75v12a1.5 1.5 0 0 1-3 0v-9.75H6v9.75a1.5 1.5 0 0 1-3 0v-12a.75.75 0 0 1 .75-.75Z" />
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 8.25h6m-6 3h6m-6 3h3" />
                </svg>
                <span>Profit &amp; Loss</span>
              </a>
              <a href="#" class="flex items-center gap-2 rounded-md px-3 py-2 hover:bg-slate-50">
                <svg class="h-4 w-4 text-slate-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4.5 5.25h15a.75.75 0 0 1 .75.75v12a1.5 1.5 0 0 1-3 0v-9.75H6v9.75a1.5 1.5 0 0 1-3 0v-12a.75.75 0 0 1 .75-.75Z" />
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 8.25h6m-6 3h6m-6 3h3" />
                </svg>
                <span>Balance Sheet</span>
              </a>
            </div>
          </div>
          <a href="#" class="flex items-center gap-2 rounded-md px-3 py-2 text-slate-700 hover:bg-slate-50">
            <svg class="h-4 w-4 text-slate-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 6.75h8.25M14.25 6.75H21M3 12h12.75M18.75 12H21M3 17.25h6.75M12.75 17.25H21" />
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9.75 6.75a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Zm6 5.25a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Zm-3 5.25a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z" />
            </svg>
            <span x-show="sidebarOpen">Preferences</span>
          </a>
        </nav>
        {% endwith %}
      </aside>

      <!-- Main content -->
      <div class="flex flex-1 flex-col min-h-0">
        <main class="flex-1 min-h-0 overflow-auto bg-slate-50 p-2">
          <div class="flex h-full flex-col gap-4 min-h-0">
            {% include "fincore/components/messages.html" %}
            {% block content %}
              <div class="flex-1 rounded-lg border border-dashed border-slate-200 bg-white p-6 text-sm text-slate-600">Main content area (HTMX targets swap here)</div>
            {% endblock %}
          </div>
        </main>
        <footer class="border-t border-slate-200 bg-white px-4 py-3 text-xs text-slate-500">© 2026 Fincore · Internal Use Only</footer>
      </div>
    </div>

    <!-- Docs drawer -->
    <div x-cloak x-show="docsOpen" class="fixed inset-0 z-50 flex justify-end bg-slate-900/40" @click.self="docsOpen=false" @keydown.escape.window="docsOpen=false">
      <div class="h-full w-full max-w-md bg-white shadow-xl border-l border-slate-200" x-transition>
        <div class="flex items-center justify-between border-b border-slate-200 px-4 py-3">
          <h2 class="text-sm font-semibold text-slate-900">Help &amp; Docs</h2>
          <button type="button" class="rounded-md p-2 text-slate-500 hover:bg-slate-50" @click="docsOpen=false">
            <svg class="h-4 w-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M6 18 18 6M6 6l12 12"/></svg>
          </button>
        </div>
        <div class="p-4 space-y-3 text-sm text-slate-700">
          {% block docs_panel %}
            <p>Use this panel for instructions, help text, and links.</p>
            <ul class="list-disc pl-5 space-y-1 text-slate-600">
              <li>Server-driven UI with HTMX.</li>
              <li>Keep business logic on the backend.</li>
              <li>Use shared components for consistency.</li>
            </ul>
          {% endblock %}
        </div>
      </div>
    </div>
  </section>

  {% vite_asset 'src/main.js' as js_path %}
  {% if js_path %}
    <script type="module" src="{{ js_path }}"></script>
  {% else %}
    <script type="module" src="{% static 'app/main.js' %}"></script>
  {% endif %}
  <script>
    document.body.addEventListener('htmx:configRequest', function (event) {
      event.detail.headers['X-CSRFToken'] = '{{ csrf_token }}';
    });
  </script>
  {% block body_extra %}{% endblock %}
</body>
</html>
